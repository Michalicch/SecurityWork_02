(()=>{"use strict";const e=e=>{setTimeout((()=>{e.classList.add("show")}),100)},t=e=>{setTimeout((()=>{e&&e.classList.remove("show")}),300)},o=e=>fetch(e).then((e=>e.json()));(()=>{const l=document.getElementById("open-auth-btn"),s=document.getElementById("auth-modal"),a=document.querySelectorAll(".btn-close"),n=document.querySelector(".login__btn"),r=document.querySelector(".logout"),c=document.getElementById("open-reg-test"),d=document.querySelector(".registration__form"),i=()=>{l.classList.add("visually-hidden"),r.classList.remove("visually-hidden"),t(s)};l.addEventListener("click",(()=>{e(s)})),a.forEach((e=>{e.addEventListener("click",(()=>{t(s),t(d)}))})),n.addEventListener("click",(()=>{const e=s.querySelector("#login-control"),t=s.querySelector("#password-control"),l=e.value,a=t.value;o("http://localhost:3001/profile").then((o=>{""!=e.value&&""!=t.value?o.login!=l||o.password!=a?(e.value="",t.value="",alert("Вы ввели неверный логин или пароль \nПовторите попытку")):o.login&&o.login===l&&o.password&&o.password===a&&(localStorage.setItem("auth",JSON.stringify(o)),i(),window.location.href="./admin.html"):alert("Заполните необходимые поля")}))})),r.addEventListener("click",(()=>{localStorage.removeItem("auth"),l.classList.remove("visually-hidden"),r.classList.add("visually-hidden"),location.reload()})),c.addEventListener("click",(()=>{e(d)})),(()=>{const e=JSON.parse(localStorage.getItem("auth"));e&&o("http://localhost:3001/profile").then((t=>{t.login&&t.login===e.login&&t.password&&t.password===e.password&&i()}))})()})()})();